# SPDX-FileCopyrightText: NVIDIA CORPORATION & AFFILIATES
# Copyright (c) 2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

name = "vllm_k8s"

[[Tests]]
id = "dynamo.vllm"
test_name = "vllm"

  [Tests.cmd_args]
  docker_image_url = "nvcr.io/nvidia/ai-dynamo/vllm-runtime:0.6.1.post1"
  dynamo_graph_path = "conf/experimental/ai_dynamo/test/agg.yaml"
    [Tests.cmd_args.dynamo]
      [Tests.cmd_args.dynamo.prefill_worker]
      num-nodes = 1
      [Tests.cmd_args.dynamo.decode_worker]
      num-nodes = 1
    [Tests.cmd_args.genai_perf]
    model = "Qwen/Qwen3-0.6B"
    endpoint = "v1/chat/completions"
    endpoint-type = "chat"
    extra-inputs = 'min_tokens:10'
    output-tokens-mean = 500
    output-tokens-stddev = 0
    random-seed = 123
    request-count = 2
    synthetic-input-tokens-mean = 300
    synthetic-input-tokens-stddev = 0
    warmup-request-count = 1
    concurrency = 1
    extra-args = "--streaming -- -v --async"
